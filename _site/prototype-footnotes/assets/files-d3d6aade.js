import{_ as v}from"./DocumentUnitWrapper.vue_vue_type_script_setup_true_lang-c12920d0.js";import{_ as w}from"./FileViewer.vue_vue_type_script_setup_true_lang-9da54c41.js";import{d as h}from"./documentUnitService-4c93048b.js";import{s as y}from"./TextEditor-f5aaa668.js";import{F as x}from"./FileUpload-7b3d8c6a.js";import{d as D,i as f,l as U,w as b,a as l,f as u,c as g,g as B,B as F,j as N,k as r,t as _}from"./index-086108b4.js";import"./dayjs.min-633259b2.js";import"./useToggleStateInRouteQuery-529f287a.js";import"./SideToggle.vue_vue_type_script_setup_true_lang-24f80c0e.js";import"./PopupModal.vue_vue_type_script_setup_true_lang-57b88188.js";import"./documentUnit-2521476f.js";import"./InfoModal.vue_vue_type_script_setup_true_lang-e56f4d05.js";import"./FileInput-178c6e95.js";const C=u("h1",{class:"heading-02-regular mb-[1rem]"},"Dokumente",-1),S={key:1,class:"flex flex-col items-start w-[40rem]"},$=u("div",{class:"mb-14"}," Aktuell ist keine Datei hinterlegt. WÃ¤hlen Sie die Datei des Originaldokumentes aus ",-1),j=D({__name:"DocumentUnitFiles",props:{documentUnit:null},emits:["updateDocumentUnit"],setup(n,{emit:o}){const i=n,m=f(),a=f(!1);async function s(){if((await y.delete(i.documentUnit.uuid)).status<300){const e=await h.getByDocumentNumber(i.documentUnit.documentNumber);e.error?console.error(e.error):o("updateDocumentUnit",e.data)}}async function c(e){a.value=!0;try{const t=await y.upload(i.documentUnit.uuid,e);t.status===201&&t.data?o("updateDocumentUnit",t.data):m.value=t.error}finally{a.value=!1}}return(e,t)=>(l(),U(v,{"document-unit":n.documentUnit},{default:b(({classes:d})=>[u("div",{class:F(["flex flex-col",d])},[C,n.documentUnit.hasFile?(l(),U(w,{key:0,"file-name":n.documentUnit.filename,"file-type":n.documentUnit.filetype,"s3-path":n.documentUnit.s3path,"upload-time-stamp":n.documentUnit.fileuploadtimestamp,onDeleteFile:s},null,8,["file-name","file-type","s3-path","upload-time-stamp"])):(l(),g("div",S,[$,B(x,{error:m.value,"is-loading":a.value,onFileSelected:t[0]||(t[0]=p=>c(p))},null,8,["error","is-loading"])]))],2)]),_:1},8,["document-unit"]))}}),A={key:1},M=D({__name:"files",props:{documentNumber:null},async setup(n){let o,i;const m=n;async function a(){const e=await h.getByDocumentNumber(m.documentNumber);return{documentUnit:f(e.data),error:e.error}}const{documentUnit:s,error:c}=([o,i]=N(()=>a()),o=await o,i(),o);return(e,t)=>{var d,p;return r(s)?(l(),U(j,{key:0,"document-unit":r(s),onUpdateDocumentUnit:t[0]||(t[0]=k=>Object.assign(r(s),k))},null,8,["document-unit"])):(l(),g("div",A,[u("h2",null,_((d=r(c))==null?void 0:d.title),1),u("p",null,_((p=r(c))==null?void 0:p.description),1)]))}}});export{M as default};
